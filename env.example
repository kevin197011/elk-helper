# Copyright (c) 2025 kk
#
# This software is released under the MIT License.
# https://opensource.org/licenses/MIT

# ===========================================
# ELK Helper 环境配置示例
# ===========================================
# 复制此文件为 .env 并修改相应的配置值
# cp env.example .env

# -------------------------------------------
# 后端服务配置
# -------------------------------------------
# 后端服务端口（默认: 8080）
# 如果修改此端口，前端会自动适配
BACKEND_PORT=8080

# -------------------------------------------
# 数据库配置
# -------------------------------------------
# PostgreSQL 数据库密码
DB_PASSWORD=postgres

# 单次 DB 查询超时（秒，默认: 5）
DB_QUERY_TIMEOUT_SECONDS=5

# -------------------------------------------
# Elasticsearch 配置
# -------------------------------------------
# Elasticsearch 集群地址（支持外部 ES 集群）
ES_URL=https://elasticsearch:9200
ES_USERNAME=elastic
ES_PASSWORD=changeme

# 是否使用 SSL/TLS（默认: URL 为 https 时自动启用）
ES_USE_SSL=true
# 是否跳过证书验证（开发环境可用，生产环境不建议）
ES_SKIP_VERIFY=true
# 可选：CA 证书内容（PEM），用于自签证书校验
ES_CA_CERTIFICATE=

# 单次 ES 查询超时（秒，默认: 30）
ES_QUERY_TIMEOUT_SECONDS=30

# -------------------------------------------
# Worker 配置（规则执行器）
# -------------------------------------------
# 是否启用 Worker（默认: true）
WORKER_ENABLED=true

# Worker 检查间隔（秒，默认: 30）
WORKER_CHECK_INTERVAL=30

# Worker 重试次数（默认: 3）
WORKER_RETRY_TIMES=3

# Worker 批量查询大小（默认: 500）
WORKER_BATCH_SIZE=500

# Worker 最大并发数（默认: 1000）
WORKER_MAX_CONCURRENCY=1000

# 单次告警发送最大耗时（秒，默认: 20）
ALERT_SEND_TIMEOUT_SECONDS=20

# -------------------------------------------
# 跨域配置
# -------------------------------------------
# 允许的跨域源（多个用逗号分隔）
CORS_ORIGINS=http://localhost:3000

# -------------------------------------------
# 管理员账户配置
# -------------------------------------------
# 初始管理员用户名
ADMIN_USERNAME=admin

# 初始管理员密码（生产环境请修改！）
ADMIN_PASSWORD=admin123

# 初始管理员邮箱
ADMIN_EMAIL=admin@devops.io

# -------------------------------------------
# 安全配置
# -------------------------------------------
# JWT 密钥（生产环境必须修改为随机强密钥！）
JWT_SECRET=elk-helper-dev-compose-secret-please-change-32chars

# 可选：敏感信息加密（base64 编码的 32 字节 key；用于 ES 密码、Webhook 等）
# APP_ENCRYPTION_KEY=$(openssl rand -base64 32)
APP_ENCRYPTION_KEY=

# 登录接口限流（默认: 60/min，burst 20）
LOGIN_RATE_LIMIT_PER_MINUTE=60
LOGIN_RATE_LIMIT_BURST=20

# -------------------------------------------
# 前端配置
# -------------------------------------------
# 前端 API 基础路径（通常不需要修改）
VITE_API_BASE_URL=/api

# 前端代理后端主机名（Docker 内部服务名）
BACKEND_HOST=backend

